<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="base.service.multiple.tables.fusion.dao.FusionDao">

    <resultMap id="Result" type="base.service.multiple.tables.fusion.entity.TableRelation">
        <result property="id" jdbcType="VARCHAR" column="id"/>
        <result property="dataBaseId" jdbcType="VARCHAR" column="data_base_id"/>
        <result property="fieldA" jdbcType="VARCHAR" column="field"/>
        <result property="relation" jdbcType="VARCHAR" column="relation"/>
        <result property="sql" jdbcType="VARCHAR" column="sql"/>
        <result property="fieldB" jdbcType="VARCHAR" column="fieldB"/>
    </resultMap>


    <parameterMap id="Base_Relation" type="base.service.multiple.tables.fusion.entity.TableRelation">
        <parameter property="id" resultMap="Result"/>
        <parameter property="dataBaseId" resultMap="Result"/>
        <parameter property="relation" resultMap="Result"/>
        <parameter property="fieldA" resultMap="Result"/>
        <parameter property="sql" resultMap="Result"/>
        <parameter property="fieldB" resultMap="Result"/>
    </parameterMap>

    <select id="getDataBase" parameterType="java.lang.String" resultType="base.service.multiple.tables.fusion.entity.DataBase">
        select * from data_base where id = #{id,jdbcType=VARCHAR}
    </select>

    <insert id="insertRelation" parameterType="java.util.ArrayList">
        insert into table_relation (id,dataBaseId,fieldA，fieldB,relation，sql)
        values
        <foreach collection="list" index="index" item="tableRelation" separator=",">
            (
            #{tableRelation.id,jdbcType=VARCHAR},
            #{tableRelation.dataBaseId,jdbcType=VARCHAR},
            #{tableRelation.fieldA,jdbcType=VARCHAR},
            #{tableRelation.fieldB,jdbcType=VARCHAR},
            #{tableRelation.relation,jdbcType=VARCHAR},
            #{tableRelation.sql,jdbcType=VARCHAR}
            )
        </foreach>

    </insert>
</mapper>